---
// import { custom } from "astro:schema";
import Index from "../pages/index.astro";
import CustomSelect from "./CustomSelect.astro";
import SearchInput from "./SearchInput.astro";
import UsefulCard from "./UsefulCard.astro";

const { allUseful, lengths } = Astro.props;
const items = allUseful.map((item, index) => ({
    ...item,
    length: lengths[index],
}));

const chips = [
    "Инфо",
    "1 сем",
    "2 сем",
    "3 сем",
    "CSS",
    "HTML",
    "Git",
    "Утилиты",
    "Debug",
    "Flex",
    "Grid",
    "Псевдо",
    "Адаптив",
    "Изображения",
    "Селекторы",
];
const options = [
    {
        label: "Все",
        value: `all`,
    },
    {
        label: chips[0],
        value: `info`,
    },
    {
        label: chips[1],
        value: `first-sem`,
    },
    {
        label: chips[2],
        value: `second-sem`,
    },
    {
        label: chips[3],
        value: `third-sem`,
    },
    {
        label: chips[4],
        value: `css`,
    },
    {
        label: chips[5],
        value: `html`,
    },
    {
        label: chips[6],
        value: `git`,
    },
    {
        label: chips[7],
        value: `utils`,
    },
    {
        label: chips[8],
        value: `debug`,
    },
    {
        label: chips[9],
        value: `flex`,
    },
    {
        label: chips[10],
        value: `grid`,
    },
    {
        label: chips[11],
        value: `pseudo`,
    },
    {
        label: chips[12],
        value: `adaptive`,
    },
    {
        label: chips[13],
        value: `images`,
    },
    {
        label: chips[14],
        value: `selectors`,
    },
];

// const filteredUseful =
//     selectedValue === "all"
//         ? allusefull
//         : allusefull.filter((post) => post.data.chips.includes(selectedValue));
---

<script>
    let selectedValue = "all";
    // const select = document.getElementById("select-test");
    // select?.addEventListener("change", (event) => {
    //     selectedValue = event.target.value;
    //     console.log(selectedValue);
    // });

    const getValue = document.getElementById("getValue");
    getValue?.addEventListener("click", () => {
        console.log(selectedValue);
    });

    const handleCustomEvent = (event) => {
        console.log("Получено сообщение:", event.detail.message);
    };

    const handleSelectChange = (value) => {
        selectedValue = value;
        console.log(selectedValue);
    };
</script>

{items.map((post) => <UsefulCard useful={post} />)}
